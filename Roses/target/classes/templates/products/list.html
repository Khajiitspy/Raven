<!--<!DOCTYPE html>-->
<!--<html lang="uk"-->
<!--      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"-->
<!--      xmlns:th="http://www.thymeleaf.org"-->
<!--      layout:decorate="~{layout}">-->
<!--<head>-->
<!--    <title>Список товарів</title>-->
<!--</head>-->
<!--<body>-->
<!--<div layout:fragment="content" class="flex flex-col items-center">-->
<!--    <h1 class="text-3xl font-bold mb-6 text-green-700">Список товарів</h1>-->

<!--    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">-->
<!--        <div th:each="product : ${products}"-->
<!--             th:replace="components/product-card :: productCard(product = ${product})"></div>-->
<!--    </div>-->
<!--</div>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="uk" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:th="http://www.thymeleaf.org"
  layout:decorate="~{layout}">

<head>
  <meta charset="utf-8" />
  <title>Список товарів</title>
</head>

<body>
  <div layout:fragment="content" class="flex flex-col items-center">
    <h1 class="text-3xl font-bold mb-6 text-green-700">Список товарів</h1>

    <!-- Search form -->
    <form th:action="@{/products/list}" method="get" class="mb-6 w-full max-w-lg flex gap-3">
      <input type="text" name="search" th:value="${search}" placeholder="Пошук товарів..."
        class="flex-1 px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-green-400" />

      <button type="submit" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition">
        Пошук
      </button>
    </form>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      <div th:each="product : ${products}">
        <div th:replace="~{components/product-card :: productCard(product=${product})}"></div>
      </div>
    </div>

    <div th:if="${page != null}" class="mt-8 flex flex-col items-center gap-4">
      <div class="flex items-center gap-2">
        <a th:href="@{/products/list(page=${page.currentPage}, size=${page.pageSize})}" th:if="${page.hasPrevious}"
          class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-semibold">
          ← Попередня
        </a>
        <span th:unless="${page.hasPrevious}" class="px-4 py-2 bg-gray-300 text-gray-500 rounded-lg cursor-not-allowed">
          ← Попередня
        </span>

        <div class="flex gap-2">
          <a th:each="i : ${#numbers.sequence(0, page.totalPages-1)}"
            th:href="@{/products/list(page=${i+1}, size=${page.pageSize}, search=${search})}" th:text="${i+1}"
            th:class="${i == page.currentPage} ? 'px-4 py-2 bg-green-600 text-white rounded-lg font-semibold' : 'px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition font-semibold'">
          </a>
        </div>


        <a th:href="@{/products/list(page=${page.currentPage + 2}, size=${page.pageSize})}" th:if="${page.hasNext}"
          class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-semibold">
          Наступна →
        </a>
        <span th:unless="${page.hasNext}" class="px-4 py-2 bg-gray-300 text-gray-500 rounded-lg cursor-not-allowed">
          Наступна →
        </span>
      </div>

      <div class="text-sm text-gray-600">
        <span>Сторінка <span th:text="${page.currentPage + 1}">1</span> з <span
            th:text="${page.totalPages}">1</span></span>
        <span class="mx-2">|</span>
        <span>Всього товарів: <span th:text="${page.totalElements}">0</span></span>
        <span class="mx-2">|</span>
        <span>На сторінці: <span th:text="${page.pageSize}">12</span></span>
      </div>
    </div>
  </div>
</body>

</html>